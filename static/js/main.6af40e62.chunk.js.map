{"version":3,"sources":["components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/App/App.jsx","services/fetch-services.js","index.js"],"names":["Searchbar","state","value","handlerSearch","e","setState","currentTarget","handlerSubmit","preventDefault","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","webformatURL","tags","id","handlerItemClick","onClick","src","alt","ImageGallery","top","prevProps","prevState","list","map","el","indx","Button","isOff","disabled","visible","color","height","width","modalContainer","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","children","fetchService","searchQuery","pageNumber","currentCount","perPage","axios","request","baseURL","params","image_type","orientation","q","page","per_page","key","response","data","hits","totalHits","fetchData","App","images","showModal","isLoading","currentImg","totalImgs","search","scrollTo","then","catch","console","log","finally","handleLoadMore","HeightBeforeRender","documentElement","scrollHeight","nextDataPortion","handlerScrollTo","toggleModal","current","find","largeImageURL","renderedContentHeight","behavior","isButtonVisible","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6af40e62.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport './Searchbar.css';\n\nclass Searchbar extends Component {\n  state = { value: '' };\n  handlerSearch = e => {\n    this.setState({ value: e.currentTarget.value });\n  };\n  handlerSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.value);\n  };\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handlerSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.value}\n            onChange={this.handlerSearch}\n          />\n        </form>\n      </header>\n    );\n  }\n}\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\nexport default Searchbar;\n","import PropTypes from 'prop-types';\nimport './ImageGalleryItem.css';\n\nconst ImageGalleryItem = ({ webformatURL, tags, id, handlerItemClick }) => {\n  return (\n    <li\n      className=\"ImageGalleryItem\"\n      onClick={() => {\n        handlerItemClick(id);\n      }}\n    >\n      <img src={webformatURL} alt={tags} className=\"ImageGalleryItem-image\" />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  handlerItemClick: PropTypes.func.isRequired,\n  webformatURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n};\nexport default ImageGalleryItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './ImageGallery.css';\nimport ImageGalleryItem from '../../components/ImageGalleryItem';\n\nclass ImageGallery extends Component {\n  state = { top: 0 };\n  componentDidUpdate(prevProps, prevState) {\n    // const doc1 = document.documentElement.clientHeight;\n    // const doc2 = document.documentElement.scrollHeight;\n    // // console.log(doc1, doc2);\n    // const res = doc2 - doc1;\n    // console.log('res', res);\n    // console.log('prevSt', prevState.top);\n    // if (prevState.top !== this.state.top) {\n    // }\n    // const doc1 = document.documentElement.clientHeight;\n    // const doc2 = document.documentElement.scrollHeight;\n    // console.log(doc1, doc2);\n    // const res = doc2 - doc1;\n    // console.log(res);\n    // this.setState({ top: res });\n    // window.scrollTo({\n    //   top: res, //document.documentElement.scrollHeight,\n    //   behavior: 'smooth',\n    // });\n  }\n  render() {\n    const { list, handlerItemClick } = this.props;\n    return (\n      <ul className=\"ImageGallery\">\n        {list.map((el, indx) => (\n          <ImageGalleryItem\n            key={indx}\n            webformatURL={el.webformatURL}\n            tags={el.tags}\n            id={el.id}\n            handlerItemClick={handlerItemClick}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\nImageGallery.propTypes = {\n  list: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n  ),\n  handlerItemClick: PropTypes.func.isRequired,\n};\nexport default ImageGallery;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './Button.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Spinner from 'react-loader-spinner';\n\nclass Button extends Component {\n  render() {\n    const { isOff, onClick } = this.props;\n    return (\n      <button\n        disabled={isOff}\n        className=\"Button\"\n        type=\"button\"\n        onClick={onClick}\n      >\n        {!isOff && 'Load more . . .'}\n        <Spinner\n          visible={isOff}\n          type=\"ThreeDots\"\n          color=\"#FFF\"\n          height={19}\n          width={69}\n        />\n      </button>\n    );\n  }\n}\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  isOff: PropTypes.bool.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport './Modal.css';\nconst modalContainer = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalContainer,\n    );\n  }\n}\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\nexport default Modal;\n","import { Component } from 'react';\n\nimport Searchbar from '../../components/Searchbar';\nimport ImageGallery from '../../components/ImageGallery';\nimport Button from '../../components/Button';\nimport Modal from '../../components/Modal';\n\nimport './App.css';\n\nimport FetchService from '../../services/fetch-services';\nconst fetchService = new FetchService();\n\nclass App extends Component {\n  state = {\n    images: [],\n    showModal: false,\n    isLoading: false,\n    currentImg: { src: '', alt: '' },\n    totalImgs: 0,\n  };\n\n  handlerSubmit = search => {\n    window.scrollTo(0, 0);\n    this.setState({ isLoading: true });\n    fetchService.searchQuery = search;\n    fetchService.pageNumber = 1;\n    fetchService.currentCount = 0;\n    fetchService\n      .fetchData()\n      .then(data => {\n        this.setState({ images: [...data.hits], totalImgs: data.totalHits });\n      })\n      .catch(console.log)\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n\n  handleLoadMore = () => {\n    const HeightBeforeRender = document.documentElement.scrollHeight;\n    this.setState({ isLoading: true });\n    fetchService\n      .nextDataPortion()\n      .then(data => {\n        this.setState(prevState => {\n          return { images: [...prevState.images, ...data.hits] };\n        });\n      })\n      .catch(console.log)\n      .then(() => {\n        this.handlerScrollTo(HeightBeforeRender);\n      })\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n\n  handlerItemClick = id => {\n    this.toggleModal();\n    const current = this.state.images.find(el => el.id === id);\n    this.setState({\n      currentImg: { src: current.largeImageURL, alt: current.tags },\n    });\n  };\n  handlerScrollTo = height => {\n    const searchElementHeight = 70;\n    const buttonLoadmoreHeight = 80;\n    const renderedContentHeight =\n      document.documentElement.scrollHeight - height;\n    const scrollTo =\n      document.documentElement.scrollHeight - renderedContentHeight;\n    window.scrollTo({\n      top: scrollTo - (searchElementHeight + buttonLoadmoreHeight),\n      behavior: 'smooth',\n    });\n  };\n  toggleModal = () => {\n    this.setState(prevState => ({ showModal: !prevState.showModal }));\n  };\n\n  render() {\n    const { images, isLoading, currentImg, totalImgs, showModal } = this.state;\n    const isButtonVisible =\n      images.length > 0 && fetchService.currentCount < totalImgs && !isLoading;\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handlerSubmit} />\n        <ImageGallery list={images} handlerItemClick={this.handlerItemClick} />\n\n        {isButtonVisible ? (\n          <Button isOff={false} onClick={this.handleLoadMore} />\n        ) : (\n          isLoading && <Button isOff={true} onClick={this.handleLoadMore} />\n        )}\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={currentImg.src} alt={currentImg.alt} />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\nexport default App;\n","import axios from 'axios';\nconst API_KEY = '18927781-76591304de9a35a1d49e108a5';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default class FetchService {\n  constructor() {\n    this.searchQuery = '';\n    this.pageNumber = 1;\n    this.currentCount = 0;\n    this.perPage = 12;\n  }\n\n  async fetchData() {\n    try {\n      const response = await axios.request({\n        baseURL: `${BASE_URL}`,\n        params: {\n          image_type: 'photo',\n          orientation: 'horizontal',\n          q: this.searchQuery,\n          page: this.pageNumber,\n          per_page: this.perPage,\n          key: API_KEY,\n        },\n      });\n      const { hits, totalHits } = response.data;\n      return { hits, totalHits };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async nextDataPortion() {\n    this.pageNumber += 1;\n    this.currentCount = this.pageNumber * this.perPage;\n    return this.fetchData();\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}