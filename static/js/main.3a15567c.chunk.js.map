{"version":3,"sources":["components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","components/App/App.jsx","services/fetch-services.js","index.js"],"names":["Searchbar","state","value","handlerSearch","e","setState","currentTarget","handlerSubmit","preventDefault","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","webformatURL","tags","id","handlerModal","onClick","src","alt","ImageGallery","window","scrollTo","top","document","documentElement","scrollHeight","behavior","list","map","el","indx","Button","isOff","disabled","visible","color","height","width","modalContainer","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","addEventListener","removeEventListener","createPortal","children","fetchService","searchQuery","pageNumber","currentCount","perPage","axios","request","baseURL","params","image_type","orientation","q","page","per_page","key","response","data","hits","totalHits","fetchData","App","images","showModal","isLoading","currentImg","totalImgs","search","then","catch","console","log","finally","handleLoadMore","nextDataPortion","prevState","toggleModal","current","find","largeImageURL","isButtonVisible","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3a15567c.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { Component } from 'react';\nimport './Searchbar.css';\n\nclass Searchbar extends Component {\n  state = { value: '' };\n  handlerSearch = e => {\n    this.setState({ value: e.currentTarget.value });\n  };\n  handlerSubmit = e => {\n    e.preventDefault();\n    this.props.onSubmit(this.state.value);\n  };\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handlerSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.value}\n            onChange={this.handlerSearch}\n          />\n        </form>\n      </header>\n    );\n  }\n}\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\nexport default Searchbar;\n","import PropTypes from 'prop-types';\nimport './ImageGalleryItem.css';\n\nconst ImageGalleryItem = ({ webformatURL, tags, id, handlerModal }) => {\n  return (\n    <li\n      className=\"ImageGalleryItem\"\n      onClick={() => {\n        handlerModal(id);\n      }}\n    >\n      <img src={webformatURL} alt={tags} className=\"ImageGalleryItem-image\" />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  handlerModal: PropTypes.func.isRequired,\n  webformatURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n  id: PropTypes.number.isRequired,\n};\nexport default ImageGalleryItem;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './ImageGallery.css';\nimport ImageGalleryItem from '../../components/ImageGalleryItem';\n\nclass ImageGallery extends Component {\n  componentDidUpdate() {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n  render() {\n    const { list, handlerModal } = this.props;\n    return (\n      <ul className=\"ImageGallery\">\n        {list.map((el, indx) => (\n          <ImageGalleryItem\n            key={indx}\n            webformatURL={el.webformatURL}\n            tags={el.tags}\n            id={el.id}\n            handlerModal={handlerModal}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\nImageGallery.propTypes = {\n  list: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n  ),\n  handlerModal: PropTypes.func.isRequired,\n};\nexport default ImageGallery;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './Button.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Spinner from 'react-loader-spinner';\n\nclass Button extends Component {\n  render() {\n    const { isOff, onClick } = this.props;\n    return (\n      <button\n        disabled={isOff}\n        className=\"Button\"\n        type=\"button\"\n        onClick={onClick}\n      >\n        {!isOff && 'Load more . . .'}\n        <Spinner\n          visible={isOff}\n          type=\"ThreeDots\"\n          color=\"#FFF\"\n          height={19}\n          width={69}\n        />\n      </button>\n    );\n  }\n}\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  isOff: PropTypes.bool.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport './Modal.css';\nconst modalContainer = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalContainer,\n    );\n  }\n}\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  children: PropTypes.node.isRequired,\n};\nexport default Modal;\n","import { Component } from 'react';\n\nimport Searchbar from '../../components/Searchbar';\nimport ImageGallery from '../../components/ImageGallery';\nimport Button from '../../components/Button';\nimport Modal from '../../components/Modal';\n\nimport './App.css';\n\nimport FetchService from '../../services/fetch-services';\nconst fetchService = new FetchService();\n\nclass App extends Component {\n  state = {\n    images: [],\n    showModal: false,\n    isLoading: false,\n    currentImg: { src: '', alt: '' },\n    totalImgs: 0,\n  };\n  handlerSubmit = search => {\n    this.setState({ isLoading: true });\n    fetchService.searchQuery = search;\n    fetchService.pageNumber = 1;\n    fetchService\n      .fetchData()\n      .then(data => {\n        this.setState({ images: [...data.hits], totalImgs: data.totalHits });\n      })\n      .catch(console.log)\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n\n  handleLoadMore = () => {\n    this.setState({ isLoading: true });\n    fetchService\n      .nextDataPortion()\n      .then(data => {\n        this.setState(prevState => {\n          return { images: [...prevState.images, ...data.hits] };\n        });\n      })\n      .catch(console.log)\n      .finally(() => {\n        this.setState({ isLoading: false });\n      });\n  };\n  handlerModal = id => {\n    this.toggleModal();\n    const current = this.state.images.find(el => el.id === id);\n    this.setState({\n      currentImg: { src: current.largeImageURL, alt: current.tags },\n    });\n  };\n\n  toggleModal = () => {\n    this.setState(prevState => ({ showModal: !prevState.showModal }));\n  };\n\n  render() {\n    const { images, isLoading, currentImg, totalImgs, showModal } = this.state;\n    const isButtonVisible =\n      images.length > 0 && fetchService.currentCount < totalImgs && !isLoading;\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handlerSubmit} />\n        <ImageGallery list={images} handlerModal={this.handlerModal} />\n\n        {isButtonVisible ? (\n          <Button isOff={false} onClick={this.handleLoadMore} />\n        ) : (\n          isLoading && <Button isOff={true} onClick={this.handleLoadMore} />\n        )}\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={currentImg.src} alt={currentImg.alt} />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\nexport default App;\n","import axios from 'axios';\nconst API_KEY = '18927781-76591304de9a35a1d49e108a5';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport default class FetchService {\n  constructor() {\n    this.searchQuery = '';\n    this.pageNumber = 1;\n    this.currentCount = 0;\n    this.perPage = 12;\n  }\n\n  async fetchData() {\n    try {\n      const response = await axios.request({\n        baseURL: `${BASE_URL}`,\n        params: {\n          image_type: 'photo',\n          orientation: 'horizontal',\n          q: this.searchQuery,\n          page: this.pageNumber,\n          per_page: this.perPage,\n          key: API_KEY,\n        },\n      });\n      const { hits, totalHits } = response.data;\n      return { hits, totalHits };\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async nextDataPortion() {\n    this.pageNumber += 1;\n    this.currentCount = this.pageNumber * this.perPage;\n    return this.fetchData();\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}